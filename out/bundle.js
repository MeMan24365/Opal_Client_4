var j=Object.create;var C=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var T=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var N=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of K(e))!R.call(s,i)&&i!==t&&C(s,i,{get:()=>e[i],enumerable:!(r=z(e,i))||r.enumerable});return s};var D=(s,e,t)=>(t=s!=null?j(I(s)):{},N(e||!s||!s.__esModule?C(t,"default",{value:s,enumerable:!0}):t,s));var q=T((G,E)=>{"use strict";var c=require("module"),W=require("crypto"),p=require("fs"),d=require("path"),F=require("vm"),U=require("os"),l=Object.prototype.hasOwnProperty,y=class{constructor(e,t){let r=t?B(t+"."):"";this._blobFilename=d.join(e,r+"BLOB"),this._mapFilename=d.join(e,r+"MAP"),this._lockFilename=d.join(e,r+"LOCK"),this._directory=e,this._load()}has(e,t){return l.call(this._memoryBlobs,e)?this._invalidationKeys[e]===t:l.call(this._storedMap,e)?this._storedMap[e][0]===t:!1}get(e,t){if(l.call(this._memoryBlobs,e)){if(this._invalidationKeys[e]===t)return this._memoryBlobs[e]}else if(l.call(this._storedMap,e)){let r=this._storedMap[e];if(r[0]===t)return this._storedBlob.slice(r[1],r[2])}}set(e,t,r){this._invalidationKeys[e]=t,this._memoryBlobs[e]=r,this._dirty=!0}delete(e){l.call(this._memoryBlobs,e)&&(this._dirty=!0,delete this._memoryBlobs[e]),l.call(this._invalidationKeys,e)&&(this._dirty=!0,delete this._invalidationKeys[e]),l.call(this._storedMap,e)&&(this._dirty=!0,delete this._storedMap[e])}isDirty(){return this._dirty}save(){let e=this._getDump(),t=Buffer.concat(e[0]),r=JSON.stringify(e[1]);try{M(this._directory),p.writeFileSync(this._lockFilename,"LOCK",{flag:"wx"})}catch{return!1}try{p.writeFileSync(this._blobFilename,t),p.writeFileSync(this._mapFilename,r)}finally{p.unlinkSync(this._lockFilename)}return!0}_load(){try{this._storedBlob=p.readFileSync(this._blobFilename),this._storedMap=JSON.parse(p.readFileSync(this._mapFilename))}catch{this._storedBlob=Buffer.alloc(0),this._storedMap={}}this._dirty=!1,this._memoryBlobs={},this._invalidationKeys={}}_getDump(){let e=[],t={},r=0;function i(o,a,n){e.push(n),t[o]=[a,r,r+n.length],r+=n.length}for(let o of Object.keys(this._memoryBlobs)){let a=this._memoryBlobs[o],n=this._invalidationKeys[o];i(o,n,a)}for(let o of Object.keys(this._storedMap)){if(l.call(t,o))continue;let a=this._storedMap[o],n=this._storedBlob.slice(a[1],a[2]);i(o,a[0],n)}return[e,t]}},v=class{constructor(){this._cacheStore=null,this._previousModuleCompile=null}setCacheStore(e){this._cacheStore=e}install(){let e=this,t=typeof require.resolve.paths=="function";this._previousModuleCompile=c.prototype._compile,c.prototype._compile=function(r,i){let o=this;function a(_){return o.require(_)}function n(_,w){return c._resolveFilename(_,o,!1,w)}a.resolve=n,t&&(n.paths=function(w){return c._resolveLookupPaths(w,o,!0)}),a.main=process.mainModule,a.extensions=c._extensions,a.cache=c._cache;let b=d.dirname(i),f=e._moduleCompile(i,r),g=[o.exports,a,o,i,b,process,global,Buffer];return f.apply(o.exports,g)}}uninstall(){c.prototype._compile=this._previousModuleCompile}_moduleCompile(e,t){var r=t.length;if(r>=2&&t.charCodeAt(0)===35&&t.charCodeAt(1)===33)if(r===2)t="";else{for(var i=2;i<r;++i){var o=t.charCodeAt(i);if(o===10||o===13)break}i===r?t="":t=t.slice(i)}var a=c.wrap(t),n=W.createHash("sha1").update(t,"utf8").digest("hex"),b=this._cacheStore.get(e,n),f=new F.Script(a,{filename:e,lineOffset:0,displayErrors:!0,cachedData:b,produceCachedData:!0});f.cachedDataProduced?this._cacheStore.set(e,n,f.cachedData):f.cachedDataRejected&&this._cacheStore.delete(e);var g=f.runInThisContext({filename:e,lineOffset:0,columnOffset:0,displayErrors:!0});return g}};function M(s){S(d.resolve(s),511)}function S(s,e){try{p.mkdirSync(s,e)}catch(t){if(t.code==="ENOENT")S(d.dirname(s)),S(s);else try{if(!p.statSync(s).isDirectory())throw t}catch{throw t}}}function B(s){let e={"\\":"zB",":":"zC","/":"zS","\0":"z0",z:"zZ"},t=/[\\:/\x00z]/g;return s.replace(t,r=>e[r])}function L(){return new F.Script('""',{produceCachedData:!0}).cachedDataProduced===!0}function O(){let s=process.env.V8_COMPILE_CACHE_CACHE_DIR;if(s)return s;let e=typeof process.getuid=="function"?"v8-compile-cache-"+process.getuid():"v8-compile-cache",t=process.arch,r=typeof process.versions.v8=="string"?process.versions.v8:typeof process.versions.chakracore=="string"?"chakracore-"+process.versions.chakracore:"node-"+process.version;return d.join(U.tmpdir(),e,t,r)}function k(){return require.main&&typeof require.main.filename=="string"?require.main.filename:process.cwd()}if(!process.env.DISABLE_V8_COMPILE_CACHE&&L()){let s=O(),e=k(),t=new y(s,e),r=new v;r.setCacheStore(t),r.install(),process.once("exit",()=>{t.isDirty()&&t.save(),r.uninstall()})}E.exports.__TEST__={FileSystemBlobStore:y,NativeCompileCache:v,mkdirpSync:M,slashEscape:B,supportsCachedData:L,getCacheDir:O,getMainName:k}});var m=require("electron");var h=require("electron"),V=D(q()),P=D(require("path"));var u=require("electron");function x(){let s=["enable-accelerated-2d-canvas","disable-gpu-vsync","disable-software-rasterizer","disable-renderer-backgrounding","disable-software-compositing-fallback","disable-gpu-process-crash-limit","force-gpu-rasterization","disable-frame-rate-limit","disable-2d-canvas-clip-aa","enable-skia-graphite","disable-background-networking","enable-quic","disable-v8-idle-tasks","enable-future-v8-vm-features","no-sandbox","disable-backing-store-limit"];for(let e=0,t=s.length;e<t;e++)u.app.commandLine.appendSwitch(s[e]);u.app.commandLine.appendSwitch("use-angle","OpenGL"),u.app.commandLine.appendSwitch("high-dpi-support","1"),u.app.commandLine.appendSwitch("v8-cache-options","code"),u.app.commandLine.appendSwitch("canvas-msaa-sample-count","0"),u.app.commandLine.appendSwitch("ebgl-antialiasing-mode","none"),console.log("Flags applied")}function A(){let{width:s,height:e}=h.screen.getPrimaryDisplay().workAreaSize,t=new h.BrowserWindow({width:s,height:e,webPreferences:{nodeIntegration:!1,nodeIntegrationInWorker:!1,webSecurity:!1,contextIsolation:!1,devTools:!1,sandbox:!1,preload:P.default.join(__dirname,"preload.js"),partition:"persist:evio"},icon:"./icon.ico"});x(),t.webContents.on("before-input-event",(r,i)=>{i.key==="F5"&&(t.reload(),r.preventDefault()),i.key==="F6"&&(t.loadURL("https://ev.io/"),r.preventDefault()),i.key==="F7"&&(t.loadURL(h.clipboard.readText()),r.preventDefault()),i.key==="F8"&&(t.loadURL("https://ev.io/user/login/"),r.preventDefault()),i.key==="F9"&&h.app.quit(),i.key==="F11"&&(t.setFullScreen(!t.isFullScreen()),r.preventDefault())}),t.removeMenu(),t.loadURL("https://ev.io"),t.once("ready-to-show",()=>{t.show()}),t.on("close",r=>{r.preventDefault(),t.destroy()})}m.app.on("ready",()=>{console.log("Client is ready to run"),A()});m.app.on("window-all-closed",()=>{process.platform!=="darwin"&&m.app.quit()});m.ipcMain.on("close",()=>{m.app.quit()});
