var l=Object.create;var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var m=(i,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of c(n))!f.call(i,a)&&a!==e&&s(i,a,{get:()=>n[a],enumerable:!(t=d(n,a))||t.enumerable});return i};var u=(i,n,e)=>(e=i!=null?l(p(i)):{},m(n||!i||!i.__esModule?s(e,"default",{value:i,enumerable:!0}):e,i));var o=require("electron"),g=require("v8-compile-cache"),r=u(require("path"));function h(){let{width:i,height:n}=o.screen.getPrimaryDisplay().workAreaSize,e=new o.BrowserWindow({width:i,height:n,webPreferences:{nodeIntegration:!1,nodeIntegrationInWorker:!1,enableRemoteModule:!0,webSecurity:!1,contextIsolation:!1,devTools:!1,sandbox:!1,preload:r.default.join(__dirname,"preload.js"),partition:"persist:evio"},icon:"./icon.ico"});w(),e.webContents.on("before-input-event",(t,a)=>{a.key==="F5"&&(e.reload(),t.preventDefault()),a.key==="F6"&&(e.loadURL("https://ev.io/"),t.preventDefault()),a.key==="F7"&&(e.loadURL(o.clipboard.readText()),t.preventDefault()),a.key==="F8"&&(e.loadURL("https://ev.io/user/login/"),t.preventDefault()),a.key==="F9"&&o.app.quit(),a.key==="F11"&&(e.setFullScreen(!e.isFullScreen()),t.preventDefault())}),e.removeMenu(),o.session.defaultSession.loadExtension(r.default.join(__dirname,"community-patch")),e.loadFile("index.html"),e.once("ready-to-show",()=>{e.show()}),e.on("close",t=>{t.preventDefault(),e.destroy()})}function w(){let i=["enable-accelerated-2d-canvas","disable-gpu-vsync","disable-software-rasterizer","disable-software-compositing-fallback","disable-gpu-process-crash-limit","force_high_performance_gpu","disable-low-end-device-mode","disable-background-networking","enable-quic","disable-v8-idle-tasks","enable-future-v8-vm-features","no-sandbox","disable-backing-store-limit"];for(let n=0,e=i.length;n<e;n++)o.app.commandLine.appendSwitch(i[n]);o.app.commandLine.appendSwitch("use-angle","d3d9"),o.app.commandLine.appendSwitch("high-dpi-support","1"),o.app.commandLine.appendSwitch("v8-cache-options","code"),console.log("Flags applied")}o.app.on("ready",()=>{console.log("Client is ready to run"),h()});o.app.on("window-all-closed",()=>{process.platform!=="darwin"&&o.app.quit()});o.ipcMain.on("close",(i,n)=>{o.app.quit()});
