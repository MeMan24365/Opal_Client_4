"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const a=require("electron");require("v8-compile-cache");const n=e(require("path"));var{cpus:p}=require("os");function i(){const{width:e,height:p}=a.screen.getPrimaryDisplay().workAreaSize,i=new a.BrowserWindow({width:e,height:p,webPreferences:{nodeIntegration:!1,nodeIntegrationInWorker:!1,enableRemoteModule:!0,webSecurity:!1,contextIsolation:!1,devTools:!0,sandbox:!1,preload:n.default.join(__dirname,"preload.js"),partition:"persist:evio"},icon:"./icon.ico"});a.app.commandLine.appendSwitch("enable-gpu-rasterization"),a.app.commandLine.appendSwitch("enable-oop-rasterization"),a.app.commandLine.appendSwitch("enable-native-gpu-memory-buffers"),a.app.commandLine.appendSwitch("enable-gpu-memory-buffer-compositor-resources"),a.app.commandLine.appendSwitch("double-buffer-compositing"),a.app.commandLine.appendSwitch("force-gpu-mem-available-mb","1500"),a.app.commandLine.appendSwitch("force-gpu-mem-discardable-limit-mb","500"),a.app.commandLine.appendSwitch("enable-webgl2-compute-context"),a.app.commandLine.appendSwitch("enable-accelerated-2d-canvas"),a.app.commandLine.appendSwitch("use-angle","d3d9"),a.app.commandLine.appendSwitch("raise-timer-frequency"),a.app.commandLine.appendSwitch("disable-background-timer-throttling"),a.app.commandLine.appendSwitch("disable-background-networking"),a.app.commandLine.appendSwitch("enable-quic"),a.app.commandLine.appendSwitch("no-sandbox"),a.app.commandLine.appendSwitch("high-dpi-support","1"),a.app.commandLine.appendSwitch("disable-v8-idle-tasks"),a.app.commandLine.appendSwitch("enable-future-v8-vm-features"),a.app.commandLine.appendSwitch("v8-cache-options","code"),a.app.commandLine.appendSwitch("disable-software-rasterizer"),a.app.commandLine.appendSwitch("disable-software-compositing-fallback"),a.app.commandLine.appendSwitch("disable-gpu-process-crash-limit"),a.app.commandLine.appendSwitch("force_high_performance_gpu"),a.app.commandLine.appendSwitch("use-gpu-in-tests"),a.app.commandLine.appendSwitch("disable-low-end-device-mode"),a.app.commandLine.appendSwitch("disable-backing-store-limit"),a.app.commandLine.appendSwitch("disable-cookie-encryption"),a.app.commandLine.appendSwitch("disable-stack-profiler"),a.app.commandLine.appendSwitch("enable-background-thread-pool"),i.webContents.on("before-input-event",((e,n)=>{"F5"===n.key&&(i.reload(),e.preventDefault()),"F6"===n.key&&(i.loadURL("https://ev.io/"),e.preventDefault()),"F7"===n.key&&(i.loadURL(a.clipboard.readText()),e.preventDefault()),"F8"===n.key&&(i.loadURL("https://ev.io/user/login/"),e.preventDefault()),"F9"===n.key&&a.app.quit(),"F11"===n.key&&(i.setFullScreen(!i.isFullScreen()),e.preventDefault())})),i.removeMenu(),i.loadFile("./html/index.html/"),i.once("ready-to-show",(()=>{i.show()})),i.on("close",(function(e){e.preventDefault(),i.destroy()}))}a.app.on("window-all-closed",(function(){"darwin"!==process.platform&&a.app.quit()})),a.app.on("ready",(()=>{console.log("App is ready to run"),i()})),a.ipcMain.on("close",((e,n)=>{a.app.quit()}));