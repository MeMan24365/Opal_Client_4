"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const a=require("electron"),n=e(require("os"));require("v8-compile-cache");const p=e(require("path"));a.app.on("window-all-closed",(function(){"darwin"!==process.platform&&a.app.quit()})),a.app.on("ready",(()=>{console.log("App is ready to run"),function(){const{width:e,height:i}=a.screen.getPrimaryDisplay().workAreaSize,t=new a.BrowserWindow({width:e,height:i,webPreferences:{nodeIntegration:!1,nodeIntegrationInWorker:!1,enableRemoteModule:!0,webSecurity:!1,contextIsolation:!1,devTools:!0,sandbox:!1,preload:p.default.join(__dirname,"preload.js"),partition:"persist:evio"},icon:"./icon.ico"});a.session.defaultSession.loadExtension(p.default.join(__dirname,"community-patch")),a.app.commandLine.appendSwitch("disable-gpu-vsync"),a.app.commandLine.appendSwitch("disable-frame-rate-limit"),n.default.cpus()[0].model.indexOf("AMD")>-1&&a.app.commandLine.appendSwitch("enable-zero-copy"),a.app.commandLine.appendSwitch("enable-accelerated-2d-canvas"),a.app.commandLine.appendSwitch("enable-webgl2-compute-context"),a.app.commandLine.appendSwitch("enable-gpu-rasterization"),a.app.commandLine.appendSwitch("ignore-gpu-blacklist"),a.app.commandLine.appendSwitch("disable-background-networking"),a.app.commandLine.appendSwitch("enable-quic"),a.app.commandLine.appendSwitch("no-sandbox"),a.app.commandLine.appendSwitch("high-dpi-support"),a.app.commandLine.appendSwitch("disable-breakpad"),a.app.commandLine.appendSwitch("disable-component-update"),a.app.commandLine.appendSwitch("disable-print-preview"),a.app.commandLine.appendSwitch("disable-metrics"),a.app.commandLine.appendSwitch("disable-metrics-repo"),a.app.commandLine.appendSwitch("disable-speech-api"),a.app.commandLine.appendSwitch("disable-web-security"),a.app.commandLine.appendSwitch("disable-hang-monitor"),a.app.commandLine.appendSwitch("disable-2d-canvas-clip-aa"),a.app.commandLine.appendSwitch("disable-bundled-ppapi-flash"),a.app.commandLine.appendSwitch("disable-logging"),a.app.commandLine.appendSwitch("disable-renderer-backgrounding"),a.app.commandLine.appendSwitch("disable-background-timer-throttling"),a.app.commandLine.appendSwitch("disable-backing-store-limit"),a.app.commandLine.appendSwitch("disable-web-security","true"),t.webContents.on("before-input-event",((e,n)=>{"F5"===n.key&&(t.reload(),e.preventDefault()),"F6"===n.key&&(t.loadURL("https://ev.io/"),e.preventDefault()),"F7"===n.key&&(t.loadURL(a.clipboard.readText()),e.preventDefault()),"F8"===n.key&&(t.loadURL("https://ev.io/user/login/"),e.preventDefault()),"F9"===n.key&&a.app.quit(),"F11"===n.key&&(t.setFullScreen(!t.isFullScreen()),e.preventDefault())})),t.removeMenu(),t.loadURL("https://ev.io/"),"https://ev.io/user/login"!=t.webContents.getURL()&&t.loadURL("https://ev.io/"),t.once("ready-to-show",(()=>{t.show()})),t.on("close",(function(e){e.preventDefault(),t.destroy()}))}()})),a.ipcMain.on("close",((e,n)=>{a.app.quit()}));